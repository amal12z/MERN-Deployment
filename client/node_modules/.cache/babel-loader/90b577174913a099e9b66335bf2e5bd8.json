{"ast":null,"code":"import _slicedToArray from\"C:/Users/amalf/Desktop/POOTCAMP/TestSomeFunctionalaty/Pets/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';// import Form from '../components/Form'\nimport{useHistory,useParams}from'react-router';import axios from'axios';import{Link}from\"react-router-dom\";import Form from'../components/Form';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddNewPage=function AddNewPage(props){var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setSuccess=_useState4[1];var onSubmitHandler=function onSubmitHandler(pet){setSuccess(false);setErrors([]);axios.post('http://localhost:8000/api/pet',pet).then(function(res){console.log(res);setSuccess(true);history.push(\"/\");}).catch(function(err){console.log(err);var dataUnique=err.response;var data=err.response.data;var errorMessages=[];if(\"errors\"in data){for(var field in data.errors){var validationError=data.errors[field];errorMessages.push(validationError.message);}}if(\"keyValue\"in data){console.log(err.response.message);errorMessages.push(\"The Pet Name Already Exists\");}setErrors(errorMessages);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container mb-5 mt-5 pt-5 col-7 \",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-border\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[errors.map(function(errMsg,i){return/*#__PURE__*/_jsxs(\"p\",{className:\"alert alert-danger\",children:[\" \",errMsg,\" \"]},i);}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"alert alert-success\",children:\"Pet has been successafully Add\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-primary\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Pet Shelter\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-outline-secondary rounded-pill ms-2 \",children:\"Back to HOME\"})})]}),/*#__PURE__*/_jsx(\"sup\",{className:\"text-primary mb-5\",children:\"Know a pet needing a home ?\"}),/*#__PURE__*/_jsx(Form,{onSubmitHandler:onSubmitHandler})]})})})});};export default AddNewPage;","map":{"version":3,"names":["React","useState","useHistory","useParams","axios","Link","Form","AddNewPage","props","id","history","errors","setErrors","success","setSuccess","onSubmitHandler","pet","post","then","res","console","log","push","catch","err","dataUnique","response","data","errorMessages","field","validationError","message","map","errMsg","i"],"sources":["C:/Users/amalf/Desktop/POOTCAMP/TestSomeFunctionalaty/Pets/client/src/pages/AddNewPage.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\n// import Form from '../components/Form'\r\nimport { useHistory , useParams} from 'react-router'\r\nimport axios from 'axios';\r\nimport { Link } from \"react-router-dom\";\r\nimport Form from '../components/Form';\r\n\r\n\r\nconst AddNewPage = (props) => {\r\n\r\n\r\n    \r\n\r\n    const {id} = useParams();\r\n    const history = useHistory();\r\n    const[errors , setErrors] = useState([])\r\n    const[success , setSuccess] = useState(false)\r\n\r\n\r\n\r\n\r\n    const onSubmitHandler = (pet) => {\r\n        setSuccess(false)\r\n        setErrors([])\r\n        axios.post('http://localhost:8000/api/pet', pet)\r\n            .then(res=>{\r\n                console.log(res)\r\n                setSuccess(true)\r\n                history.push(\"/\")\r\n            })\r\n            .catch(err=>{\r\n                console.log(err)\r\n                const dataUnique = err.response\r\n                const data = err.response.data\r\n                const errorMessages = [];\r\n                if(\"errors\" in data){\r\n                    for(let field in data.errors){\r\n                        const validationError = data.errors[field]\r\n                        errorMessages.push(validationError.message)\r\n                    }\r\n                }\r\n                if(\"keyValue\" in data){\r\n                    console.log(err.response.message)\r\n                    errorMessages.push(\"The Pet Name Already Exists\")\r\n                }\r\n                setErrors(errorMessages)\r\n\r\n                \r\n                \r\n            })\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n    <div className='container mb-5 mt-5 pt-5 col-7 '>\r\n        <div  className='form-border'>\r\n\r\n            {/* <Link to=\"/\"> HOME </Link> */}\r\n            <div className='container mt-5'>\r\n            {errors.map((errMsg , i) => <p key={i} className='alert alert-danger'> {errMsg} </p>)}\r\n            {success && <p  className='alert alert-success'>Pet has been successafully Add</p>}\r\n            {/* <Link to=\"/\"> HOME </Link> */}\r\n\r\n            {/* <div className='container mt-5  text-center'> */}\r\n            {/* <h5 className='text-primary'>we have quotes by :</h5> */}\r\n            {/* </div> */}\r\n\r\n            <div className='d-flex justify-content-between mt-3'>\r\n            <div className='text-primary'><h5>Pet Shelter</h5></div>\r\n            <div><Link to=\"/\" className=\"btn btn-outline-secondary rounded-pill ms-2 \">Back to HOME</Link></div>\r\n            </div>\r\n\r\n            <sup className='text-primary mb-5'>Know a pet needing a home ?</sup>\r\n            <Form onSubmitHandler ={onSubmitHandler} />\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AddNewPage"],"mappings":"uJAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA;AACA,OAASC,UAAT,CAAsBC,SAAtB,KAAsC,cAAtC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,KAAP,KAAiB,oBAAjB,C,6IAGA,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,KAAD,CAAW,CAK1B,eAAaL,SAAS,EAAtB,CAAOM,EAAP,YAAOA,EAAP,CACA,GAAMC,QAAO,CAAGR,UAAU,EAA1B,CACA,cAA4BD,QAAQ,CAAC,EAAD,CAApC,wCAAMU,MAAN,eAAeC,SAAf,eACA,eAA8BX,QAAQ,CAAC,KAAD,CAAtC,yCAAMY,OAAN,eAAgBC,UAAhB,eAKA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,GAAD,CAAS,CAC7BF,UAAU,CAAC,KAAD,CAAV,CACAF,SAAS,CAAC,EAAD,CAAT,CACAR,KAAK,CAACa,IAAN,CAAW,+BAAX,CAA4CD,GAA5C,EACKE,IADL,CACU,SAAAC,GAAG,CAAE,CACPC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAL,UAAU,CAAC,IAAD,CAAV,CACAJ,OAAO,CAACY,IAAR,CAAa,GAAb,EACH,CALL,EAMKC,KANL,CAMW,SAAAC,GAAG,CAAE,CACRJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,EACA,GAAMC,WAAU,CAAGD,GAAG,CAACE,QAAvB,CACA,GAAMC,KAAI,CAAGH,GAAG,CAACE,QAAJ,CAAaC,IAA1B,CACA,GAAMC,cAAa,CAAG,EAAtB,CACA,GAAG,UAAYD,KAAf,CAAoB,CAChB,IAAI,GAAIE,MAAR,GAAiBF,KAAI,CAAChB,MAAtB,CAA6B,CACzB,GAAMmB,gBAAe,CAAGH,IAAI,CAAChB,MAAL,CAAYkB,KAAZ,CAAxB,CACAD,aAAa,CAACN,IAAd,CAAmBQ,eAAe,CAACC,OAAnC,EACH,CACJ,CACD,GAAG,YAAcJ,KAAjB,CAAsB,CAClBP,OAAO,CAACC,GAAR,CAAYG,GAAG,CAACE,QAAJ,CAAaK,OAAzB,EACAH,aAAa,CAACN,IAAd,CAAmB,6BAAnB,EACH,CACDV,SAAS,CAACgB,aAAD,CAAT,CAIH,CAzBL,EA0BH,CA7BD,CAwCF,mBACE,sCACA,YAAK,SAAS,CAAC,iCAAf,uBACI,YAAM,SAAS,CAAC,aAAhB,uBAGI,aAAK,SAAS,CAAC,gBAAf,WACCjB,MAAM,CAACqB,GAAP,CAAW,SAACC,MAAD,CAAUC,CAAV,qBAAgB,WAAW,SAAS,CAAC,oBAArB,eAA4CD,MAA5C,OAAQC,CAAR,CAAhB,EAAX,CADD,CAECrB,OAAO,eAAI,UAAI,SAAS,CAAC,qBAAd,4CAFZ,cASA,aAAK,SAAS,CAAC,qCAAf,wBACA,YAAK,SAAS,CAAC,cAAf,uBAA8B,mCAA9B,EADA,cAEA,kCAAK,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,8CAAvB,0BAAL,EAFA,GATA,cAcA,YAAK,SAAS,CAAC,mBAAf,yCAdA,cAeA,KAAC,IAAD,EAAM,eAAe,CAAGE,eAAxB,EAfA,GAHJ,EADJ,EADA,EADF,CA4BD,CAjFD,CAmFA,cAAeR,WAAf"},"metadata":{},"sourceType":"module"}